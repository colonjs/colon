!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("colon",e):t.colon=e()}(this,function(){"use strict";function t(t){t.data=t.options.data||{},t.get=function(e){return t.data[e]}}function e(t,n,i){function r(t){if(t||0===o.length)return i();e(o.shift(),n,r)}var o=t.childNodes&&[].slice.call(t.childNodes);i=i||function(){},(n=n||function(){})(t,r)}function n(t){var e=document.implementation.createHTMLDocument();return e.body.innerHTML=t,e.body.children}function i(t,e){var n=void 0,i=0;if(Array.isArray(t)){for(n=t.length;i<n;i++)if(!1===e.call(t[i],t[i],i))return t}else for(i in t)if(!1===e.call(t[i],t[i],i))return t;return t}function r(t){var e={},n=e.toString.call(t);return null==t?""+t:("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ").forEach(function(t){return e["[object "+t+"]"]=t.toLowerCase()}),"object"===(void 0===t?"undefined":N(t))||"function"==typeof t?e[n]||"object":void 0===t?"undefined":N(t))}function o(t){var e={},n=e.toString,i=e.hasOwnProperty,r=i.toString,o=r.call(Object),a=void 0,s=void 0;return!(!t||"[object Object]"!==n.call(t))&&(!(a=Object.getPrototypeOf(t))||"function"==typeof(s=i.call(a,"constructor")&&a.constructor)&&r.call(s)===o)}function a(){var t=void 0,e=void 0,n=void 0,i=void 0,s=void 0,c=void 0,u=arguments[0]||{},l=1,f=arguments.length,d=!1;for("boolean"==typeof u&&(d=u,u=arguments[l]||{},l++),"object"!==(void 0===u?"undefined":A(u))&&"function"!==r(u)&&(u={}),l===f&&(u=this,l--);l<f;l++)if(null!==(t=arguments[l]))for(e in t)s=u[e],i=t[e],u!=i&&(d&&i&&(o(i)||(c=Array.isArray(i)))?(c?(c=!1,n=s&&Array.isArray(s)?s:[]):n=s&&o(s)?s:{},u[e]=a(d,n,i)):void 0!==i&&(u[e]=i));return u}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.add(e)}):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function u(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var n=" "+(t.getAttribute("class")||"")+" ",i=" "+e+" ";n.indexOf(i)>=0;)n=n.replace(i," ");n=n.trim(),n?t.setAttribute("class",n):t.removeAttribute("class")}}function l(t){var e=f(t),n="";return e.map(function(t){return n+="var "+t+' = this.get("'+t+'"); '}),new Function(n+"return "+t+";")}function f(t){var e=[];return t.replace(F,function(t,n){void 0!==n&&-1===e.indexOf(n)&&-1===R.indexOf(n)&&e.push(n)}),e}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t){var i=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(this instanceof p))return new p(t,r);if(t instanceof Node)r.template=t;else if("string"==typeof t){var o=n(t),s=J(o,1);t=s[0],r.template=t}else"string"!=typeof t&&(r=t);this.options=a(!0,x,r),this.co=this.options.co,t=this.options.template,e(t,function(t,e){if(1===t.nodeType){return e(!1===i.compile.elementNodes.call(i,t))}3===t.nodeType&&i.compile.textNodes.call(i,t),e()}),this.view=t,t=null}function h(t){t.$Compile=p,t.view=t.$Compile(t.options.template,{data:t.data,co:t}).view}function m(t){var e=t.options.computed;if(e){var n=void 0,i=void 0;for(i in e)"function"==typeof(n=e[i])&&(n={get:n},n.enumerable=!0,n.configurable=!0,Object.defineProperty(t.data,i,n))}}function y(e){t(e),m(e),h(e)}function b(t){if(!(this instanceof b))return new b(t);this.options=t,y(this)}var v=/\{\{((?:.|\n)+?)\}\}/g,g={text:function(t){if(!v.test(t))return JSON.stringify(t);for(var e=[],n=v.lastIndex=0,i=void 0,r=void 0;r=v.exec(t);)i=r.index,i>n&&e.push(JSON.stringify(t.slice(n,i))),e.push(r[1].trim()),n=i+r[0].length;return n<t.length&&e.push(JSON.stringify(t.slice(n))),e.join("+")}},x={template:"",data:{}},N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w={identifier:{bind:":"},priority:["each"]},O={bind:function(){this.holder=document.createComment(""+w.identifier.bind+this.name),this.node.parentNode.replaceChild(this.holder,this.node)},update:function(t){t&&this.holder.parentNode.replaceChild(this.node,this.holder)}},S={update:function(t){this.node.setAttribute(this.name,t)}},j={update:function(t){this.node.style.display=t?"block":"none"}},C={update:function(t){this.node.textContent=t}},D=function(){function t(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),I={bind:function(){if(this.holder=document.createComment(""+w.identifier.bind+this.name),this.node.parentNode.replaceChild(this.holder,this.node),this.itemName="item",this.indexName="index",this.dataName=this.expression,-1!=this.expression.indexOf(" in ")){var t=/\(((?:.|\n)+?)\)/g,e=this.expression.split(" in "),n=D(e,2),i=n[0],r=n[1],o=null;if(o=t.exec(i)){var a=o[1].split(","),s=D(a,2),c=s[0],u=s[1];u&&(this.indexName=u.trim()),this.itemName=c.trim()}else this.itemName=i.trim();this.dataName=r.trim()}this.expression=this.dataName},update:function(t){var e=this;if(!t||Array.isArray(t)){var n=document.createDocumentFragment();t.map(function(t,i){var r,o=b({template:e.node.cloneNode(!0),data:(r={},s(r,e.itemName,t),s(r,e.indexName,i),r)});n.appendChild(o.options.template)}),this.holder.parentNode.replaceChild(n,this.holder)}}},L={update:function(t){var e=this;i(t,function(t,n){"object"===r(t)?i(t,function(t,n){return e.node.style[n]=t}):e.node.style[n]=t})}},E={update:function(t){var e=this;i(t,function(t,n){if("object"===r(t))i(t,function(t,n){return t?c(e.node,n):u(e.node,n)});else{var o="number"===r(n)?t:n;t?c(e.node,o):u(e.node,o)}})}},P={update:function(t){this.node.setAttribute(this.attrName,t)}},T={IF:O,src:S,show:j,text:C,each:I,style:L,clus:E,attribute:P},F=/"[^"]*"|'[^']*'|\.\w*[a-zA-Z$_]\w*|\w*[a-zA-Z$_]\w*:|(\w*[a-zA-Z$_]\w*)/g,R=["true","false","undefined","null","NaN","isNaN","typeof","in","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","unescape","escape","eval","isFinite","Number","String","parseFloat","parseInt"],$=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),U=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,t),"if"===e.name&&(e.name="IF"),"class"===e.name&&(e.name="clus"),Object.assign(this,e),Object.assign(this,T[this.name]),this.bindData()}return $(t,[{key:"bindData",value:function(){this.expression&&(this.bind&&this.bind(),this.update&&this.update(l(this.expression).call(this.co)))}}]),t}(),k=function(t){return/\{?\{\{(.+?)\}\}\}?/g.test(t)},z=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},J=function(){function t(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();return p.prototype.compile={},p.prototype.compile.elementNodes=function(t){var e=this,n=[].slice.call(t.attributes),i="",r="",o="";if(t.hasAttributes()&&this.bindPriority(t))return!1;n.map(function(n){i=n.name,r=n.value.trim(),0===i.indexOf(w.identifier.bind)&&""!==r?(o=i.slice(w.identifier.bind.length),e.bindDirective({node:t,expression:r,name:o}),t.removeAttribute(i)):e.bindAttribute(t,n)})},p.prototype.compile.textNodes=function(t){if(""===t.textContent.trim())return!1;var e=document.createTextNode("");t.parentNode.insertBefore(e,t),this.bindDirective({node:e,name:"text",expression:g.text(t.textContent)}),t.parentNode.removeChild(t)},p.prototype.bindDirective=function(t){new U(z({},t,{co:this.co}))},p.prototype.bindAttribute=function(t,e){if(!k(e.value)||""==e.value.trim())return!1;this.bindDirective({node:t,name:"attribute",expression:g.text(e.value),attrName:e.name})},p.prototype.bindPriority=function(t){for(var e=void 0,n=void 0,i=0;i<w.priority.length;i++)return n=w.priority[i],!!(e=t.getAttribute(""+w.identifier.bind+n))&&(!!(e=e.trim())&&(t.removeAttribute(""+w.identifier.bind+n),this.bindDirective({node:t,name:n,expression:e}),!0))},b});
//# sourceMappingURL=colon.min.js.map
