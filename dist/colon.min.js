!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("colon",e):t.colon=e()}(this,function(){"use strict";function t(e,n,i){function o(e){if(e||0===r.length)return i();t(r.shift(),n,o)}var r=e.childNodes&&[].slice.call(e.childNodes);i=i||function(){},(n=n||function(){})(e,o)}function e(t){var e=document.implementation.createHTMLDocument();return e.body.innerHTML=t,e.body.children}function n(t,e){var n=void 0,i=0;if(Array.isArray(t)){for(n=t.length;i<n;i++)if(!1===e.call(t[i],t[i],i))return t}else for(i in t)if(!1===e.call(t[i],t[i],i))return t;return t}function i(t){var e={},n=e.toString.call(t);return null==t?""+t:("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ").forEach(function(t){return e["[object "+t+"]"]=t.toLowerCase()}),"object"===(void 0===t?"undefined":g(t))||"function"==typeof t?e[n]||"object":void 0===t?"undefined":g(t))}function o(t){var e={},n=e.toString,i=e.hasOwnProperty,o=i.toString,r=o.call(Object),a=void 0,s=void 0;return!(!t||"[object Object]"!==n.call(t))&&(!(a=Object.getPrototypeOf(t))||"function"==typeof(s=i.call(a,"constructor")&&a.constructor)&&o.call(s)===r)}function r(){var t=void 0,e=void 0,n=void 0,a=void 0,s=void 0,c=void 0,u=arguments[0]||{},d=1,f=arguments.length,l=!1;for("boolean"==typeof u&&(l=u,u=arguments[d]||{},d++),"object"!==(void 0===u?"undefined":N(u))&&"function"!==i(u)&&(u={}),d===f&&(u=this,d--);d<f;d++)if(null!==(t=arguments[d]))for(e in t)s=u[e],a=t[e],u!=a&&(l&&a&&(o(a)||(c=Array.isArray(a)))?(c?(c=!1,n=s&&Array.isArray(s)?s:[]):n=s&&o(s)?s:{},u[e]=r(l,n,a)):void 0!==a&&(u[e]=a));return u}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.add(e)}):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function c(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var n=" "+(t.getAttribute("class")||"")+" ",i=" "+e+" ";n.indexOf(i)>=0;)n=n.replace(i," ");n=n.trim(),n?t.setAttribute("class",n):t.removeAttribute("class")}}function u(t){var e=d(t),n="";return e.map(function(t){return n+="var "+t+' = data["'+t+'"]; '}),new Function("data",n+"return "+t+";")}function d(t){var e=[];return t.replace(F,function(t,n){void 0!==n&&-1===e.indexOf(n)&&-1===T.indexOf(n)&&e.push(n)}),e}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(n){var i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(this instanceof l))return new l(n,o);if(n instanceof Node)o.template=n;else if("string"==typeof n){var a=e(n),s=$(a,1);n=s[0],o.template=n}else"string"!=typeof n&&(o=n);this.options=r(!0,x,o),this.data=this.options.data,n=this.options.template,t(n,function(t,e){if(1===t.nodeType){return e(!1===i.compile.elementNodes.call(i,t))}3===t.nodeType&&i.compile.textNodes.call(i,t),e()}),this.view=n,n=null}function p(t){t.$Compile=l,t.view=t.$Compile(t.options.template,{data:t.options.data}).view}function m(t){var e=t.options.computed;if(e){var n=void 0,i=void 0;for(i in e)"function"==typeof(n=e[i])&&(n={get:n},n.enumerable=!0,n.configurable=!0,Object.defineProperty(t.options.data,i,n))}}function h(t){m(t),p(t)}function y(t){if(!(this instanceof y))return new y(t);this.options=t,h(this)}var b=/\{\{((?:.|\n)+?)\}\}/g,v={text:function(t){if(!b.test(t))return JSON.stringify(t);for(var e=[],n=b.lastIndex=0,i=void 0,o=void 0;o=b.exec(t);)i=o.index,i>n&&e.push(JSON.stringify(t.slice(n,i))),e.push(o[1].trim()),n=i+o[0].length;return n<t.length&&e.push(JSON.stringify(t.slice(n))),e.join("+")}},x={template:"",data:{}},g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A={identifier:{bind:":"},priority:["each"]},w={beforeUpdate:function(){this.holder=document.createComment(""+A.identifier.bind+this.name),this.node.parentNode.replaceChild(this.holder,this.node)},update:function(t){t&&this.holder.parentNode.replaceChild(this.node,this.holder)}},O={update:function(t){this.node.setAttribute(this.name,t)}},S={update:function(t){this.node.style.display=t?"block":"none"}},j={update:function(t){this.node.textContent=t}},C=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),I={beforeUpdate:function(){if(this.holder=document.createComment(""+A.identifier.bind+this.name),this.node.parentNode.replaceChild(this.holder,this.node),this.itemName="item",this.indexName="index",this.dataName=this.expression,-1!=this.expression.indexOf(" in ")){var t=/\(((?:.|\n)+?)\)/g,e=this.expression.split(" in "),n=C(e,2),i=n[0],o=n[1],r=null;if(r=t.exec(i)){var a=r[1].split(","),s=C(a,2),c=s[0],u=s[1];u&&(this.indexName=u.trim()),this.itemName=c.trim()}else this.itemName=i.trim();this.dataName=o.trim()}this.expression=this.dataName},update:function(t){var e=this;if(!t||Array.isArray(t)){var n=document.createDocumentFragment();t.map(function(t,i){var o,r=y({template:e.node.cloneNode(!0),data:(o={},a(o,e.itemName,t),a(o,e.indexName,i),o)});n.appendChild(r.options.template)}),this.holder.parentNode.replaceChild(n,this.holder)}}},L={update:function(t){var e=this;n(t,function(t,o){"object"===i(t)?n(t,function(t,n){return e.node.style[n]=t}):e.node.style[o]=t})}},D={update:function(t){var e=this;n(t,function(t,o){if("object"===i(t))n(t,function(t,n){return t?s(e.node,n):c(e.node,n)});else{var r="number"===i(o)?t:o;t?s(e.node,r):c(e.node,r)}})}},E={update:function(t){this.node.setAttribute(this.attrName,t)}},U={IF:w,src:O,show:S,text:j,each:I,style:L,clus:D,attribute:E},F=/"[^"]*"|'[^']*'|\.\w*[a-zA-Z$_]\w*|\w*[a-zA-Z$_]\w*:|(\w*[a-zA-Z$_]\w*)/g,T=["true","false","undefined","null","NaN","isNaN","typeof","in","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","unescape","escape","eval","isFinite","Number","String","parseFloat","parseInt"],P=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,t),"if"===e.name&&(e.name="IF"),"class"===e.name&&(e.name="clus"),Object.assign(this,e),Object.assign(this,U[this.name]),this.beforeUpdate&&this.beforeUpdate(),this.update&&this.update(u(this.expression)(this.compile.data))},R=function(t){return/\{?\{\{(.+?)\}\}\}?/g.test(t)},$=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();return l.prototype.compile={},l.prototype.compile.elementNodes=function(t){var e=this,n=[].slice.call(t.attributes),i="",o="",r="";if(t.hasAttributes()&&this.bindPriority(t))return!1;n.map(function(n){i=n.name,o=n.value.trim(),0===i.indexOf(A.identifier.bind)&&""!==o?(r=i.slice(A.identifier.bind.length),e.bindDirective({node:t,expression:o,name:r}),t.removeAttribute(i)):e.bindAttribute(t,n)})},l.prototype.compile.textNodes=function(t){if(""===t.textContent.trim())return!1;this.bindDirective({node:t,name:"text",expression:v.text(t.textContent)})},l.prototype.bindDirective=function(t){t.compile=this,new P(t)},l.prototype.bindAttribute=function(t,e){if(!R(e.value)||""==e.value.trim())return!1;this.bindDirective({node:t,name:"attribute",expression:v.text(e.value),attrName:e.name})},l.prototype.bindPriority=function(t){for(var e=void 0,n=void 0,i=0;i<A.priority.length;i++)return n=A.priority[i],!!(e=t.getAttribute(""+A.identifier.bind+n))&&(!!(e=e.trim())&&(t.removeAttribute(""+A.identifier.bind+n),this.bindDirective({node:t,name:n,expression:e}),!0))},y});
//# sourceMappingURL=colon.min.js.map
