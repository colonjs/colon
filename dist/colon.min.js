!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("colon",e):t.colon=e()}(this,function(){"use strict";function t(t){t.data=t.options.data||{},t.get=function(e){return t.data[e]}}function e(t,n,i){function o(t){if(t||0===r.length)return i();e(r.shift(),n,o)}var r=t.childNodes&&[].slice.call(t.childNodes);i=i||function(){},(n=n||function(){})(t,o)}function n(t){var e=document.implementation.createHTMLDocument();return e.body.innerHTML=t,e.body.children}function i(t,e){return t.replace(/([a-z]|(?:[A-Z0-9]+))([A-Z0-9]|$)/g,function(t,n,i){return n+(i&&(e||"-")+i)}).toLowerCase()}function o(t,e){var n=void 0,i=0;if(Array.isArray(t)){for(n=t.length;i<n;i++)if(!1===e.call(t[i],t[i],i))return t}else for(i in t)if(!1===e.call(t[i],t[i],i))return t;return t}function r(t){var e={},n=e.toString.call(t);return null==t?""+t:("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ").forEach(function(t){return e["[object "+t+"]"]=t.toLowerCase()}),"object"===(void 0===t?"undefined":A(t))||"function"==typeof t?e[n]||"object":void 0===t?"undefined":A(t))}function a(t){var e={},n=e.toString,i=e.hasOwnProperty,o=i.toString,r=o.call(Object),a=void 0,c=void 0;return!(!t||"[object Object]"!==n.call(t))&&(!(a=Object.getPrototypeOf(t))||"function"==typeof(c=i.call(a,"constructor")&&a.constructor)&&o.call(c)===r)}function c(){var t=void 0,e=void 0,n=void 0,i=void 0,o=void 0,s=void 0,u=arguments[0]||{},f=1,l=arguments.length,d=!1;for("boolean"==typeof u&&(d=u,u=arguments[f]||{},f++),"object"!==(void 0===u?"undefined":w(u))&&"function"!==r(u)&&(u={}),f===l&&(u=this,f--);f<l;f++)if(null!==(t=arguments[f]))for(e in t)o=u[e],i=t[e],u!=i&&(d&&i&&(a(i)||(s=Array.isArray(i)))?(s?(s=!1,n=o&&Array.isArray(o)?o:[]):n=o&&a(o)?o:{},u[e]=c(d,n,i)):void 0!==i&&(u[e]=i));return u}function s(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.add(e)}):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function u(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var n=" "+(t.getAttribute("class")||"")+" ",i=" "+e+" ";n.indexOf(i)>=0;)n=n.replace(i," ");n=n.trim(),n?t.setAttribute("class",n):t.removeAttribute("class")}}function f(t){for(var e=l(t),n="",i=0;i<e.length;i++){var o=e[i];n+="var "+o+' = this.get("'+o+'"); '}return new Function(n+"return "+t+";")}function l(t){var e=[];return t.replace($,function(t,n){void 0!==n&&-1===e.indexOf(n)&&-1===F.indexOf(n)&&e.push(n)}),e}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t){var i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(this instanceof p))return new p(t,o);if(t instanceof Node)o.template=t;else if("string"==typeof t){var r=n(t),a=J(r,1);t=a[0],o.template=t}else"string"!=typeof t&&(o=t);this.options=c(!0,x,o),this.co=this.options.co,t=this.options.template,e(t,function(t,e){if(1===t.nodeType){return e(!1===i.compile.elementNodes.call(i,t))}3===t.nodeType&&i.compile.textNodes.call(i,t),e()}),this.view=t,t=null}function h(t){t.$Compile=p,t.view=t.$Compile(t.options.template,{data:t.data,co:t}).view}function m(t){var e=t.options.computed;if(e){var n=void 0,i=void 0;for(i in e)"function"==typeof(n=e[i])&&(n={get:n},n.enumerable=!0,n.configurable=!0,Object.defineProperty(t.data,i,n))}}function b(e){t(e),m(e),h(e)}function y(t){if(!(this instanceof y))return new y(t);this.options=t,b(this)}var v=/\{\{((?:.|\n)+?)\}\}/g,g={text:function(t){if(!v.test(t))return JSON.stringify(t);for(var e=[],n=v.lastIndex=0,i=void 0,o=void 0;o=v.exec(t);)i=o.index,i>n&&e.push(JSON.stringify(t.slice(n,i))),e.push(o[1].trim()),n=i+o[0].length;return n<t.length&&e.push(JSON.stringify(t.slice(n))),e.join("+")}},x={template:"",data:{}},A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O={identifier:{bind:":"},priority:["each"]},N={bind:function(){this.holder=document.createComment(""+O.identifier.bind+this.name),this.node.parentNode.replaceChild(this.holder,this.node)},update:function(t){t&&this.holder.parentNode.replaceChild(this.node,this.holder)}},j={update:function(t){this.node.setAttribute(this.name,t)}},S={update:function(t){this.node.style.display=t?"block":"none"}},C={update:function(t){this.node.textContent=t}},L={bind:function(){this.holder=document.createComment(""+O.identifier.bind+this.name),this.node.parentNode.replaceChild(this.holder,this.node)},update:function(t){var e=this;if(!t||Array.isArray(t)){var n=document.createDocumentFragment();t.map(function(t,i){var o=y({template:e.node.cloneNode(!0),data:{item:t,index:i}});n.appendChild(o.options.template)}),this.holder.parentNode.replaceChild(n,this.holder)}}},D={update:function(t){var e=this;o(t,function(t,n){"object"===r(t)?o(t,function(t,n){return e.node.style[i(n)]=t}):e.node.style[i(n)]=t})}},E={update:function(t){var e=this;o(t,function(t,n){if("object"===r(t))o(t,function(t,n){return t?s(e.node,n):u(e.node,n)});else{var i="number"===r(n)?t:n;t?s(e.node,i):u(e.node,i)}})}},P={update:function(t){this.node.setAttribute(this.attrName,t)}},T={IF:N,src:j,show:S,text:C,each:L,style:D,clus:E,attribute:P},$=/"[^"]*"|'[^']*'|\.\w*[a-zA-Z$_]\w*|\w*[a-zA-Z$_]\w*:|(\w*[a-zA-Z$_]\w*)/g,F=["true","false","undefined","null","NaN","typeof","in"],Z=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),z=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,t),"if"===e.name&&(e.name="IF"),"class"===e.name&&(e.name="clus"),Object.assign(this,e),Object.assign(this,T[this.name]),this.bindData()}return Z(t,[{key:"bindData",value:function(){this.expression&&(this.bind&&this.bind(),this.update&&this.update(f(this.expression).call(this.co)))}}]),t}(),I=function(t){return/\{?\{\{(.+?)\}\}\}?/g.test(t)},k=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},J=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,c=t[Symbol.iterator]();!(i=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&c.return&&c.return()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();return p.prototype.compile={},p.prototype.compile.elementNodes=function(t){var e=this,n=[].slice.call(t.attributes),i="",o="",r="";if(t.hasAttributes()&&this.bindPriority(t))return!1;n.map(function(n){i=n.name,o=n.value.trim(),0===i.indexOf(O.identifier.bind)&&""!==o?(r=i.slice(O.identifier.bind.length),e.bindDirective({node:t,expression:o,name:r}),t.removeAttribute(i)):e.bindAttribute(t,n)})},p.prototype.compile.textNodes=function(t){if(""===t.textContent.trim())return!1;var e=document.createTextNode("");t.parentNode.insertBefore(e,t),this.bindDirective({node:e,name:"text",expression:g.text(t.textContent)}),t.parentNode.removeChild(t)},p.prototype.bindDirective=function(t){new z(k({},t,{co:this.co}))},p.prototype.bindAttribute=function(t,e){if(!I(e.value)||""==e.value.trim())return!1;this.bindDirective({node:t,name:"attribute",expression:g.text(e.value),attrName:e.name})},p.prototype.bindPriority=function(t){for(var e=void 0,n=void 0,i=0;i<O.priority.length;i++)return n=O.priority[i],!!(e=t.getAttribute(""+O.identifier.bind+n))&&(!!(e=e.trim())&&(t.removeAttribute(""+O.identifier.bind+n),this.bindDirective({node:t,name:n,expression:e}),!0))},y});
//# sourceMappingURL=colon.min.js.map
