!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("colon",e):t.colon=e()}(this,function(){"use strict";function t(t){t.data=t.options.data||{},t.get=function(e){return t.data[e]}}function e(t,n,i){function o(t){if(t||0===r.length)return i();e(r.shift(),n,o)}var r=t.childNodes&&[].slice.call(t.childNodes);i=i||function(){},(n=n||function(){})(t,o)}function n(t){var e=document.implementation.createHTMLDocument();return e.body.innerHTML=t,e.body.children}function i(t,e){var n=void 0,i=0;if(Array.isArray(t)){for(n=t.length;i<n;i++)if(!1===e.call(t[i],t[i],i))return t}else for(i in t)if(!1===e.call(t[i],t[i],i))return t;return t}function o(t){var e={},n=e.toString.call(t);return null==t?""+t:("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ").forEach(function(t){return e["[object "+t+"]"]=t.toLowerCase()}),"object"===(void 0===t?"undefined":x(t))||"function"==typeof t?e[n]||"object":void 0===t?"undefined":x(t))}function r(t){var e={},n=e.toString,i=e.hasOwnProperty,o=i.toString,r=o.call(Object),a=void 0,c=void 0;return!(!t||"[object Object]"!==n.call(t))&&(!(a=Object.getPrototypeOf(t))||"function"==typeof(c=i.call(a,"constructor")&&a.constructor)&&o.call(c)===r)}function a(){var t=void 0,e=void 0,n=void 0,i=void 0,c=void 0,s=void 0,u=arguments[0]||{},f=1,d=arguments.length,l=!1;for("boolean"==typeof u&&(l=u,u=arguments[f]||{},f++),"object"!==(void 0===u?"undefined":A(u))&&"function"!==o(u)&&(u={}),f===d&&(u=this,f--);f<d;f++)if(null!==(t=arguments[f]))for(e in t)c=u[e],i=t[e],u!=i&&(l&&i&&(r(i)||(s=Array.isArray(i)))?(s?(s=!1,n=c&&Array.isArray(c)?c:[]):n=c&&r(c)?c:{},u[e]=a(l,n,i)):void 0!==i&&(u[e]=i));return u}function c(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.add(e)}):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function s(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var n=" "+(t.getAttribute("class")||"")+" ",i=" "+e+" ";n.indexOf(i)>=0;)n=n.replace(i," ");n=n.trim(),n?t.setAttribute("class",n):t.removeAttribute("class")}}function u(t){for(var e=f(t),n="",i=0;i<e.length;i++){var o=e[i];n+="var "+o+' = this.get("'+o+'"); '}return new Function(n+"return "+t+";")}function f(t){var e=[];return t.replace(F,function(t,n){void 0!==n&&-1===e.indexOf(n)&&-1===P.indexOf(n)&&e.push(n)}),e}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t){var i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(this instanceof l))return new l(t,o);if(t instanceof Node)o.template=t;else if("string"==typeof t){var r=n(t),c=k(r,1);t=c[0],o.template=t}else"string"!=typeof t&&(o=t);this.options=a(!0,g,o),this.co=this.options.co,t=this.options.template,e(t,function(t,e){if(1===t.nodeType){return e(!1===i.compile.elementNodes.call(i,t))}3===t.nodeType&&i.compile.textNodes.call(i,t),e()}),this.view=t,t=null}function p(t){t.$Compile=l,t.view=t.$Compile(t.options.template,{data:t.data,co:t}).view}function h(t){var e=t.options.computed;if(e){var n=void 0,i=void 0;for(i in e)"function"==typeof(n=e[i])&&(n={get:n},n.enumerable=!0,n.configurable=!0,Object.defineProperty(t.data,i,n))}}function m(e){t(e),h(e),p(e)}function b(t){if(!(this instanceof b))return new b(t);this.options=t,m(this)}var y=/\{\{((?:.|\n)+?)\}\}/g,v={text:function(t){if(!y.test(t))return JSON.stringify(t);for(var e=[],n=y.lastIndex=0,i=void 0,o=void 0;o=y.exec(t);)i=o.index,i>n&&e.push(JSON.stringify(t.slice(n,i))),e.push(o[1].trim()),n=i+o[0].length;return n<t.length&&e.push(JSON.stringify(t.slice(n))),e.join("+")}},g={template:"",data:{}},x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N={identifier:{bind:":"},priority:["each"]},O={bind:function(){this.holder=document.createComment(""+N.identifier.bind+this.name),this.node.parentNode.replaceChild(this.holder,this.node)},update:function(t){t&&this.holder.parentNode.replaceChild(this.node,this.holder)}},w={update:function(t){this.node.setAttribute(this.name,t)}},S={update:function(t){this.node.style.display=t?"block":"none"}},j={update:function(t){this.node.textContent=t}},C={bind:function(){this.holder=document.createComment(""+N.identifier.bind+this.name),this.node.parentNode.replaceChild(this.holder,this.node)},update:function(t){var e=this;if(!t||Array.isArray(t)){var n=document.createDocumentFragment();t.map(function(t,i){var o=b({template:e.node.cloneNode(!0),data:{item:t,index:i}});n.appendChild(o.options.template)}),this.holder.parentNode.replaceChild(n,this.holder)}}},D={update:function(t){var e=this;i(t,function(t,n){"object"===o(t)?i(t,function(t,n){return e.node.style[n]=t}):e.node.style[n]=t})}},L={update:function(t){var e=this;i(t,function(t,n){if("object"===o(t))i(t,function(t,n){return t?c(e.node,n):s(e.node,n)});else{var r="number"===o(n)?t:n;t?c(e.node,r):s(e.node,r)}})}},I={update:function(t){this.node.setAttribute(this.attrName,t)}},E={IF:O,src:w,show:S,text:j,each:C,style:D,clus:L,attribute:I},F=/"[^"]*"|'[^']*'|\.\w*[a-zA-Z$_]\w*|\w*[a-zA-Z$_]\w*:|(\w*[a-zA-Z$_]\w*)/g,P=["true","false","undefined","null","NaN","isNaN","typeof","in","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","unescape","escape","eval","isFinite","Number","String","parseFloat","parseInt"],T=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),R=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,t),"if"===e.name&&(e.name="IF"),"class"===e.name&&(e.name="clus"),Object.assign(this,e),Object.assign(this,E[this.name]),this.bindData()}return T(t,[{key:"bindData",value:function(){this.expression&&(this.bind&&this.bind(),this.update&&this.update(u(this.expression).call(this.co)))}}]),t}(),$=function(t){return/\{?\{\{(.+?)\}\}\}?/g.test(t)},U=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},k=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,c=t[Symbol.iterator]();!(i=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&c.return&&c.return()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();return l.prototype.compile={},l.prototype.compile.elementNodes=function(t){var e=this,n=[].slice.call(t.attributes),i="",o="",r="";if(t.hasAttributes()&&this.bindPriority(t))return!1;n.map(function(n){i=n.name,o=n.value.trim(),0===i.indexOf(N.identifier.bind)&&""!==o?(r=i.slice(N.identifier.bind.length),e.bindDirective({node:t,expression:o,name:r}),t.removeAttribute(i)):e.bindAttribute(t,n)})},l.prototype.compile.textNodes=function(t){if(""===t.textContent.trim())return!1;var e=document.createTextNode("");t.parentNode.insertBefore(e,t),this.bindDirective({node:e,name:"text",expression:v.text(t.textContent)}),t.parentNode.removeChild(t)},l.prototype.bindDirective=function(t){new R(U({},t,{co:this.co}))},l.prototype.bindAttribute=function(t,e){if(!$(e.value)||""==e.value.trim())return!1;this.bindDirective({node:t,name:"attribute",expression:v.text(e.value),attrName:e.name})},l.prototype.bindPriority=function(t){for(var e=void 0,n=void 0,i=0;i<N.priority.length;i++)return n=N.priority[i],!!(e=t.getAttribute(""+N.identifier.bind+n))&&(!!(e=e.trim())&&(t.removeAttribute(""+N.identifier.bind+n),this.bindDirective({node:t,name:n,expression:e}),!0))},b});
//# sourceMappingURL=colon.min.js.map
