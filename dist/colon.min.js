!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.colon=e()}(this,function(){"use strict";function t(e,i,n){function o(e){if(e||0===r.length)return n();t(r.shift(),i,o)}var r=e.childNodes&&[].slice.call(e.childNodes);n=n||function(){},(i=i||function(){})(e,o)}function e(t){var e=document.implementation.createHTMLDocument();return e.body.innerHTML=t,e.body.children}function i(t,e){var i=void 0,n=0;if(Array.isArray(t)){for(i=t.length;n<i;n++)if(!1===e.call(t[n],t[n],n))return t}else for(n in t)if(!1===e.call(t[n],t[n],n))return t;return t}function n(t){var e={},i=e.toString.call(t);return null==t?""+t:("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ").forEach(function(t){return e["[object "+t+"]"]=t.toLowerCase()}),"object"===(void 0===t?"undefined":g(t))||"function"==typeof t?e[i]||"object":void 0===t?"undefined":g(t))}function o(t){var e={},i=e.toString,n=e.hasOwnProperty,o=n.toString,r=o.call(Object),a=void 0,s=void 0;return!(!t||"[object Object]"!==i.call(t))&&(!(a=Object.getPrototypeOf(t))||"function"==typeof(s=n.call(a,"constructor")&&a.constructor)&&o.call(s)===r)}function r(){var t=void 0,e=void 0,i=void 0,a=void 0,s=void 0,c=void 0,u=arguments[0]||{},d=1,f=arguments.length,l=!1;for("boolean"==typeof u&&(l=u,u=arguments[d]||{},d++),"object"!==(void 0===u?"undefined":N(u))&&"function"!==n(u)&&(u={}),d===f&&(u=this,d--);d<f;d++)if(null!==(t=arguments[d]))for(e in t)s=u[e],a=t[e],u!=a&&(l&&a&&(o(a)||(c=Array.isArray(a)))?(c?(c=!1,i=s&&Array.isArray(s)?s:[]):i=s&&o(s)?s:{},u[e]=r(l,i,a)):void 0!==a&&(u[e]=a));return u}function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function s(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.add(e)}):t.classList.add(e);else{var i=" "+(t.getAttribute("class")||"")+" ";i.indexOf(" "+e+" ")<0&&t.setAttribute("class",(i+e).trim())}}function c(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var i=" "+(t.getAttribute("class")||"")+" ",n=" "+e+" ";i.indexOf(n)>=0;)i=i.replace(n," ");i=i.trim(),i?t.setAttribute("class",i):t.removeAttribute("class")}}function u(t){var e=d(t),i="";return e.map(function(t){return i+="var "+t+' = data["'+t+'"]; '}),new Function("data",i+"return "+t+";")}function d(t){var e=[];return t.replace(F,function(t,i){void 0!==i&&-1===e.indexOf(i)&&-1===T.indexOf(i)&&e.push(i)}),e}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(i){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(this instanceof l))return new l(i,o);if(i instanceof Node)o.template=i;else if("string"==typeof i){var a=e(i),s=$(a,1);i=s[0],o.template=i}else"string"!=typeof i&&(o=i);this.options=r(!0,x,o),this.data=this.options.data,i=this.options.template,t(i,function(t,e){if(1===t.nodeType){return e(!1===n.compile.elementNodes.call(n,t))}3===t.nodeType&&n.compile.textNodes.call(n,t),e()}),this.view=i,i=null}function p(t){t.$Compile=l,t.view=t.$Compile(t.options.template,{data:t.options.data}).view}function m(t){var e=t.options.computed;if(e){var i=void 0,n=void 0;for(n in e)"function"==typeof(i=e[n])&&(i={get:i},i.enumerable=!0,i.configurable=!0,Object.defineProperty(t.options.data,n,i))}}function h(t){m(t),p(t)}function y(t){if(!(this instanceof y))return new y(t);this.options=t,h(this)}var b=/\{\{((?:.|\n)+?)\}\}/g,v={text:function(t){if(!b.test(t))return JSON.stringify(t);for(var e=[],i=b.lastIndex=0,n=void 0,o=void 0;o=b.exec(t);)n=o.index,n>i&&e.push(JSON.stringify(t.slice(i,n))),e.push(o[1].trim()),i=n+o[0].length;return i<t.length&&e.push(JSON.stringify(t.slice(i))),e.join("+")}},x={template:"",data:{}},g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A={identifier:{bind:":"},priority:["each"]},w={beforeUpdate:function(){this.holder=document.createComment(""+A.identifier.bind+this.name),this.node.parentNode.replaceChild(this.holder,this.node)},update:function(t){t&&this.holder.parentNode.replaceChild(this.node,this.holder)}},O={update:function(t){this.node.setAttribute(this.name,t)}},S={update:function(t){this.node.style.display=t?"block":"none"}},j={update:function(t){this.node.textContent=t}},C=function(){function t(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw r}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),I={beforeUpdate:function(){if(this.holder=document.createComment(""+A.identifier.bind+this.name),this.node.parentNode.replaceChild(this.holder,this.node),this.itemName="item",this.indexName="index",this.dataName=this.expression,-1!=this.expression.indexOf(" in ")){var t=/\(((?:.|\n)+?)\)/g,e=this.expression.split(" in "),i=C(e,2),n=i[0],o=i[1],r=null;if(r=t.exec(n)){var a=r[1].split(","),s=C(a,2),c=s[0],u=s[1];u&&(this.indexName=u.trim()),this.itemName=c.trim()}else this.itemName=n.trim();this.dataName=o.trim()}this.expression=this.dataName},update:function(t){var e=this;if(!t||Array.isArray(t)){var i=document.createDocumentFragment();t.map(function(t,n){var o,r=y({template:e.node.cloneNode(!0),data:(o={},a(o,e.itemName,t),a(o,e.indexName,n),o)});i.appendChild(r.options.template)}),this.holder.parentNode.replaceChild(i,this.holder)}}},L={update:function(t){var e=this;i(t,function(t,o){"object"===n(t)?i(t,function(t,i){return e.node.style[i]=t}):e.node.style[o]=t})}},D={update:function(t){var e=this;i(t,function(t,o){if("object"===n(t))i(t,function(t,i){return t?s(e.node,i):c(e.node,i)});else{var r="number"===n(o)?t:o;t?s(e.node,r):c(e.node,r)}})}},E={update:function(t){this.node.setAttribute(this.attrName,t)}},U={IF:w,src:O,show:S,text:j,each:I,style:L,clus:D,attribute:E},F=/"[^"]*"|'[^']*'|\.\w*[a-zA-Z$_]\w*|\w*[a-zA-Z$_]\w*:|(\w*[a-zA-Z$_]\w*)/g,T=["true","false","undefined","null","NaN","isNaN","typeof","in","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","unescape","escape","eval","isFinite","Number","String","parseFloat","parseInt"],P=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,t),"if"===e.name&&(e.name="IF"),"class"===e.name&&(e.name="clus"),Object.assign(this,e),Object.assign(this,U[this.name]),this.beforeUpdate&&this.beforeUpdate(),this.update&&this.update(u(this.expression)(this.compile.data))},R=function(t){return/\{?\{\{(.+?)\}\}\}?/g.test(t)},$=function(){function t(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw r}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();return l.prototype.compile={},l.prototype.compile.elementNodes=function(t){var e=this,i=[].slice.call(t.attributes),n="",o="",r="";if(t.hasAttributes()&&this.bindPriority(t))return!1;i.map(function(i){n=i.name,o=i.value.trim(),0===n.indexOf(A.identifier.bind)&&""!==o?(r=n.slice(A.identifier.bind.length),e.bindDirective({node:t,expression:o,name:r}),t.removeAttribute(n)):e.bindAttribute(t,i)})},l.prototype.compile.textNodes=function(t){if(""===t.textContent.trim())return!1;this.bindDirective({node:t,name:"text",expression:v.text(t.textContent)})},l.prototype.bindDirective=function(t){t.compile=this,new P(t)},l.prototype.bindAttribute=function(t,e){if(!R(e.value)||""==e.value.trim())return!1;this.bindDirective({node:t,name:"attribute",expression:v.text(e.value),attrName:e.name})},l.prototype.bindPriority=function(t){for(var e=void 0,i=void 0,n=0;n<A.priority.length;n++)return i=A.priority[n],!!(e=t.getAttribute(""+A.identifier.bind+i))&&(!!(e=e.trim())&&(t.removeAttribute(""+A.identifier.bind+i),this.bindDirective({node:t,name:i,expression:e}),!0))},y});
//# sourceMappingURL=colon.min.js.map
