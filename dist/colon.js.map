{"version":3,"file":"colon.js","sources":["../src/compile/walk.js","../src/compile/parse.js","../src/compile/domify.js","../src/compile/defaults.js","../src/common/utils.js","../src/common/extend.js","../src/configure.js","../src/directives/if.js","../src/directives/src.js","../src/directives/show.js","../src/directives/text.js","../src/directives/each.js","../src/directives/style.js","../src/common/dom.js","../src/directives/class.js","../src/directives/attribute.js","../src/directives/index.js","../src/compile/generate.js","../src/directive.js","../src/compile/utils.js","../src/compile/index.js","../src/init/compile.js","../src/init/computed.js","../src/init/index.js","../src/index.js"],"sourcesContent":["/**\n * walk dom element\n *\n * @param {DOM}   el\n * @param {Function}   action\n * @param {Function} done\n */\nexport default function walk(el, action, done) {\n    const nodes = el.childNodes && [].slice.call(el.childNodes);\n\n    done = done || function () {};\n    action = action || function () {};\n\n    function next(skip) {\n        if (skip || nodes.length === 0) return done();\n        walk(nodes.shift(), action, next);\n    }\n\n    action(el, next);\n}\n","const tagRE = /\\{\\{((?:.|\\n)+?)\\}\\}/g;\n\nexport default {\n    text(text) {\n        // reference: https://github.com/vuejs/vue/blob/dev/src/compiler/parser/text-parser.js#L15-L41\n        if (!tagRE.test(text)) return JSON.stringify(text);\n\n        const tokens = [];\n        let lastIndex = tagRE.lastIndex = 0;\n        let index, matched;\n\n        while (matched = tagRE.exec(text)) {\n            index = matched.index;\n            if (index > lastIndex) {\n                tokens.push(JSON.stringify(text.slice(lastIndex, index)));\n            }\n            tokens.push(matched[1].trim());\n            lastIndex = index + matched[0].length;\n        }\n\n        if (lastIndex < text.length) tokens.push(JSON.stringify(text.slice(lastIndex)));\n\n        return tokens.join('+');\n    },\n};\n","/**\n * Converts a string into a DOM element\n *\n * @param {String} DOMString\n * @return {DOM}\n */\nexport default function domify(DOMString) {\n    const html = document.implementation.createHTMLDocument();\n\n    html.body.innerHTML = DOMString;\n\n    return html.body.children;\n}\n","export default {\n    template: ``,\n    data: {},\n};\n","export function format(name, separator) {\n    const RE = /([a-z]|(?:[A-Z0-9]+))([A-Z0-9]|$)/g;\n\n    return name.replace(RE, (_, $1, $2) => $1 + ($2 && (separator || '-') + $2)).toLowerCase();\n}\n\nexport function each(items, callback) {\n    let len, i = 0;\n\n\tif (Array.isArray(items)) {\n\t\tlen = items.length;\n\t\tfor ( ; i < len; i++ ) {\n\t\t\tif (callback.call(items[i], items[i], i) === false) return items;\n\t\t}\n\t} else {\n\t\tfor ( i in items ) {\n            if (callback.call(items[i], items[i], i) === false) return items;\n\t\t}\n\t}\n\n\treturn items;\n}\n\nexport function type(object) {\n    const class2type = {};\n    const type = class2type.toString.call(object);\n    const typeString = 'Boolean Number String Function Array Date RegExp Object Error Symbol';\n\n    if (object == null) return `${object}`;\n\n    typeString.split(' ').forEach(type => class2type[`[object ${type}]`] = type.toLowerCase());\n\n    return (\n        typeof object === 'object' ||\n        typeof object === 'function'\n        ?\n        class2type[type] || 'object'\n        :\n        typeof object\n    );\n}\n\nexport function isPlainObject(object) {\n    const class2type = {};\n    const toString = class2type.toString;\n    const hasOwn = class2type.hasOwnProperty;\n    const fnToString = hasOwn.toString;\n    const ObjectFunctionString = fnToString.call(Object);\n\n    let prototype, ctor;\n\n    if (!object || toString.call(object) !== '[object Object]') return false;\n\n    prototype = Object.getPrototypeOf(object);\n\n    if (!prototype) return true;\n\n    ctor = hasOwn.call(prototype, 'constructor') && prototype.constructor;\n\n    return typeof ctor === 'function' && fnToString.call( ctor ) === ObjectFunctionString;\n}\n","import { type, isPlainObject } from './utils';\n\n/**\n * Extend object\n *\n * @method extend\n * @return {Object} object\n */\nexport default function extend() {\n    let options, name, clone, copy, source, copyIsArray,\n        target = arguments[0] || {},\n        i = 1,\n        length = arguments.length,\n        deep = false;\n\n    if (typeof target === 'boolean') {\n        deep = target;\n        target = arguments[i] || {};\n        i++;\n    }\n\n    if (typeof target !== 'object' && type(target) !== 'function') {\n        target = {};\n    }\n\n    if (i === length) {\n        target = this;\n        i--;\n    }\n\n    for (; i < length; i++) {\n        //\n        if ((options = arguments[i]) !== null) {\n            // for in source object\n            for (name in options) {\n\n                source = target[name];\n                copy = options[name];\n\n                if (target == copy) {\n                    continue;\n                }\n\n                // deep clone\n                if (deep && copy && (isPlainObject(copy) || (copyIsArray = Array.isArray(copy)))) {\n                    // if copy is array\n                    if (copyIsArray) {\n                        copyIsArray = false;\n                        // if is not array, set it to array\n                        clone = source && Array.isArray(source) ? source : [];\n                    } else {\n                        // if copy is not a object, set it to object\n                        clone = source && isPlainObject(source) ? source : {};\n                    }\n\n                    target[name] = extend(deep, clone, copy);\n                } else if (copy !== undefined) {\n                    target[name] = copy;\n                }\n            }\n        }\n    }\n\n    return target;\n}\n","export default {\n    identifier: {\n        bind: `:`,\n    },\n    priority: [\n        'each',\n    ],\n};\n","import configure from '../configure';\n\nexport default {\n    beforeUpdate() {\n        this.holder = document.createComment(`${configure.identifier.bind}${this.name}`);\n        this.node.parentNode.replaceChild(this.holder, this.node);\n    },\n    update(show) {\n        if (show) this.holder.parentNode.replaceChild(this.node, this.holder);\n    },\n};\n","export default {\n    update(src) {\n        this.node.setAttribute(this.name, src);\n    },\n};\n","export default {\n    update(show) {\n        this.node.style.display = show ? `block` : `none`;\n    },\n};\n","export default {\n    update(value) {\n        this.node.textContent = value;\n    },\n};\n","import configure from '../configure';\nimport colon from '../index';\n\nexport default {\n    beforeUpdate() {\n        this.holder = document.createComment(`${configure.identifier.bind}${this.name}`);\n        this.node.parentNode.replaceChild(this.holder, this.node);\n\n        // parse alias\n        this.itemName = `item`;\n        this.indexName = `index`;\n        this.dataName = this.expression;\n\n        if (this.expression.indexOf(' in ') != -1) {\n            const bracketRE = /\\(((?:.|\\n)+?)\\)/g;\n            const [item, data] = this.expression.split(' in ');\n            let matched = null;\n\n            if (matched = bracketRE.exec(item)) {\n                const [item, index] = matched[1].split(',');\n                index ? this.indexName = index.trim() : '';\n                this.itemName = item.trim();\n            } else {\n                this.itemName = item.trim();\n            }\n\n            this.dataName = data.trim();\n        }\n\n        this.expression = this.dataName;\n    },\n    update(data) {\n        if (data && !Array.isArray(data)) return;\n\n        const fragment = document.createDocumentFragment();\n\n        data.map((item, index) => {\n            const co = colon({\n                template: this.node.cloneNode(true),\n                data: {\n                    [this.itemName]: item,\n                    [this.indexName]: index,\n                },\n            });\n            fragment.appendChild(co.options.template);\n        });\n\n        this.holder.parentNode.replaceChild(fragment, this.holder);\n    },\n};\n","import { each, type } from '../common/utils';\n\nexport default {\n    update(style) {\n        each(style, (item, i) => {\n            if (type(item) === 'object') {\n                each(item, (value, key) => this.node.style[key] = value);\n            } else {\n                this.node.style[i] = item;\n            }\n        });\n    },\n};\n","// reference: https://github.com/vuejs/vue/blob/dev/src/platforms/web/runtime/class-util.js#L7-L26\nexport function addClass(el, cls) {\n    if (!cls || !(cls = cls.trim())) return;\n\n    if (el.classList) {\n        if (cls.indexOf(' ') > -1) {\n            cls.split(/\\s+/).forEach(c => el.classList.add(c));\n        } else {\n            el.classList.add(cls);\n        }\n    } else {\n        const current = ` ${el.getAttribute('class') || ''} `;\n        if (current.indexOf(` ${cls} `) < 0) {\n            el.setAttribute('class', (current + cls).trim());\n        }\n    }\n}\n\n// reference: https://github.com/vuejs/vue/blob/dev/src/platforms/web/runtime/class-util.js#L32-L61\nexport function removeClass(el, cls) {\n    if (!cls || !(cls = cls.trim())) return;\n\n    if (el.classList) {\n        if (cls.indexOf(' ') > -1) {\n            cls.split(/\\s+/).forEach(c => el.classList.remove(c));\n        } else {\n            el.classList.remove(cls);\n        }\n        if (!el.classList.length) el.removeAttribute('class');\n    } else {\n        let cur = ` ${el.getAttribute('class') || ''} `;\n        const tar = ` ${cls} `;\n        while (cur.indexOf(tar) >= 0) {\n            cur = cur.replace(tar, ' ');\n        }\n        cur = cur.trim();\n        cur ? el.setAttribute('class', cur) : el.removeAttribute('class');\n    }\n}\n","import { each, type } from '../common/utils';\nimport { addClass, removeClass } from '../common/dom';\n\nexport default {\n    update(clus) {\n        each(clus, (item, i) => {\n            if (type(item) === 'object') {\n                each(item, (value, key) => value ? addClass(this.node, key) : removeClass(this.node, key));\n            } else {\n                const className = type(i) === 'number' ? item : i;\n                item ? addClass(this.node, className) : removeClass(this.node, className);\n            }\n        });\n    },\n};\n","export default {\n    update(value) {\n        this.node.setAttribute(this.attrName, value);\n    },\n};\n","import IF from './if';\nimport src from './src';\nimport show from './show';\nimport text from './text';\nimport each from './each';\nimport style from './style';\nimport clus from './class';\nimport attribute from './attribute';\n\nexport default {\n    IF,\n    src,\n    show,\n    text,\n    each,\n    style,\n    clus,\n    attribute,\n};\n","const dependencyRE = /\"[^\"]*\"|'[^']*'|\\.\\w*[a-zA-Z$_]\\w*|\\w*[a-zA-Z$_]\\w*:|(\\w*[a-zA-Z$_]\\w*)/g;\nconst globals = [\n    'true', 'false', 'undefined', 'null', 'NaN', 'isNaN', 'typeof', 'in',\n    'decodeURI', 'decodeURIComponent', 'encodeURI', 'encodeURIComponent', 'unescape',\n    'escape', 'eval', 'isFinite', 'Number', 'String', 'parseFloat', 'parseInt',\n];\n\nexport function generate(expression) {\n    const dependencies = extractDependencies(expression);\n    let dependenciesCode = '';\n\n    dependencies.map(dependency => dependenciesCode += `var ${dependency} = data[\"${dependency}\"]; `);\n\n    return new Function(`data`, `${dependenciesCode}return ${expression};`);\n}\n\nexport function extractDependencies(expression) {\n    const dependencies = [];\n\n    expression.replace(dependencyRE, (match, dependency) => {\n        if (\n            dependency !== undefined &&\n            dependencies.indexOf(dependency) === -1 &&\n            globals.indexOf(dependency) === -1\n        ) {\n            dependencies.push(dependency);\n        }\n    });\n\n    return dependencies;\n}\n","import directives from './directives/index';\nimport { generate } from './compile/generate';\n\nexport default class Directive {\n    constructor(options = {}) {\n        if (options.name === 'if') options.name = `IF`;\n        if (options.name === 'class') options.name = `clus`;\n\n        Object.assign(this, options);\n        Object.assign(this, directives[this.name]);\n\n        this.beforeUpdate && this.beforeUpdate();\n        this.update && this.update(generate(this.expression)(this.compile.data));\n    }\n}\n","export const hasInterpolation = text => /\\{?\\{\\{(.+?)\\}\\}\\}?/g.test(text);\n","import walk from './walk';\nimport parse from './parse';\nimport domify from './domify';\nimport defaults from './defaults';\nimport extend from '../common/extend';\nimport configure from '../configure';\nimport Directive from '../directive';\nimport { hasInterpolation } from './utils';\n\nexport default function Compile(template, options = {}) {\n    if (!(this instanceof Compile)) return new Compile(template, options);\n\n    if (template instanceof Node) {\n        options.template = template;\n    } else if (typeof template === 'string') {\n        [template] = domify(template);\n        options.template = template;\n    } else if (typeof template !== 'string') {\n        options = template;\n    }\n\n    this.options = extend(true, defaults, options);\n    this.data = this.options.data;\n    template = this.options.template;\n\n    walk(template, (node, next) => {\n        if (node.nodeType === 1) {\n            const skip = this.compile.elementNodes.call(this, node);\n            return next(skip === false);\n        } else if (node.nodeType === 3) {\n            this.compile.textNodes.call(this, node);\n        }\n        next();\n    });\n\n    this.view = template;\n    template = null;\n}\n\nCompile.prototype.compile = {};\n\n/**\n * compile element nodes\n *\n * @param {Node} node\n * @return {Void|Boolean}\n */\nCompile.prototype.compile.elementNodes = function (node) {\n    let attributes = [].slice.call(node.attributes),\n        attrName = ``,\n        attrValue = ``,\n        directiveName = ``;\n\n    if (node.hasAttributes() && this.bindPriority(node)) return false;\n\n    attributes.map(attribute => {\n        attrName = attribute.name;\n        attrValue = attribute.value.trim();\n\n        if (attrName.indexOf(configure.identifier.bind) === 0 && attrValue !== '') {\n            directiveName = attrName.slice(configure.identifier.bind.length);\n\n            this.bindDirective({\n                node,\n                expression: attrValue,\n                name: directiveName,\n            });\n            node.removeAttribute(attrName);\n        } else {\n            this.bindAttribute(node, attribute);\n        }\n    });\n};\n\n/**\n * compile text nodes.\n *\n * @param {Node} node\n * @return {Void|Boolean}\n */\nCompile.prototype.compile.textNodes = function (node) {\n    if (node.textContent.trim() === '') return false;\n\n    this.bindDirective({\n        node,\n        name: 'text',\n        expression: parse.text(node.textContent),\n    });\n};\n\n/**\n * bind directive\n *\n * @param {Object} options - directive options\n */\nCompile.prototype.bindDirective = function (options) {\n    options.compile = this;\n    new Directive(options);\n};\n\n/**\n * bind attribute.\n *\n * @param {Node} node\n * @param {Node} attribute\n */\nCompile.prototype.bindAttribute = function (node, attribute) {\n    if (!hasInterpolation(attribute.value) || attribute.value.trim() == '') return false;\n\n    this.bindDirective({\n        node,\n        name: 'attribute',\n        expression: parse.text(attribute.value),\n        attrName: attribute.name,\n    });\n};\n\n/**\n * bind priority directive.\n *\n * @param {Node} node\n * @return {Boolean}\n */\nCompile.prototype.bindPriority = function (node) {\n    let attrValue, directive;\n\n    for (let i = 0; i < configure.priority.length; i++) {\n        directive = configure.priority[i];\n        attrValue = node.getAttribute(`${configure.identifier.bind}${directive}`);\n\n        if (attrValue) {\n            attrValue = attrValue.trim();\n            if (!attrValue) return false;\n\n            node.removeAttribute(`${configure.identifier.bind}${directive}`);\n            this.bindDirective({\n                node,\n                name: directive,\n                expression: attrValue,\n            });\n\n            return true;\n        } else {\n            return false;\n        }\n    }\n};\n","import Compile from '../compile/index';\n\nexport default function initCompile(co) {\n    co.$Compile = Compile;\n\n    co.view = co.$Compile(co.options.template, {\n        data: co.options.data,\n    }).view;\n}\n","export default function initComputed(co) {\n    const computed = co.options.computed;\n\n    if (!computed) return;\n\n    let descriptor, prop;\n\n    for (prop in computed) {\n        descriptor = computed[prop];\n\n        if (typeof descriptor === 'function') {\n            descriptor = {\n                get: descriptor,\n            };\n\n            descriptor.enumerable = true;\n            descriptor.configurable = true;\n\n            Object.defineProperty(co.options.data, prop, descriptor);\n        }\n    }\n}\n","import initCompile from './compile';\nimport initComputed from './computed';\n\nexport default function init(co) {\n    initComputed(co);\n    initCompile(co);\n}\n","import init from './init/index';\n\nexport default function colon(options) {\n    if (!(this instanceof colon)) return new colon(options);\n\n    this.options = options;\n    init(this);\n}\n"],"names":["walk","el","action","done","nodes","childNodes","slice","call","next","skip","length","shift","tagRE","text","test","JSON","stringify","tokens","lastIndex","index","matched","exec","push","trim","join","domify","DOMString","html","document","implementation","createHTMLDocument","body","innerHTML","children","template","data","each","items","callback","len","i","Array","isArray","type","object","class2type","toString","typeString","split","forEach","toLowerCase","isPlainObject","hasOwn","hasOwnProperty","fnToString","ObjectFunctionString","Object","prototype","ctor","getPrototypeOf","constructor","extend","options","name","clone","copy","source","copyIsArray","target","arguments","deep","undefined","identifier","bind","priority","beforeUpdate","holder","createComment","configure","node","parentNode","replaceChild","update","show","src","setAttribute","style","display","value","textContent","itemName","indexName","dataName","expression","indexOf","bracketRE","item","fragment","createDocumentFragment","map","co","colon","cloneNode","appendChild","key","addClass","cls","classList","add","c","current","getAttribute","removeClass","remove","removeAttribute","cur","tar","replace","clus","className","attrName","IF","attribute","dependencyRE","globals","generate","dependencies","extractDependencies","dependenciesCode","dependency","Function","match","Directive","assign","directives","compile","hasInterpolation","Compile","Node","defaults","nodeType","elementNodes","textNodes","view","attributes","attrValue","directiveName","hasAttributes","bindPriority","bindDirective","bindAttribute","parse","directive","initCompile","$Compile","initComputed","computed","descriptor","prop","get","enumerable","configurable","defineProperty","init"],"mappings":"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"}